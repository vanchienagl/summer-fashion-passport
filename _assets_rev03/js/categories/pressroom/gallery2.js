
$(function(){$('.js-motion-scale').each(function(i){$(this).attr('data-item-index',i);});var w=$(window).width(),h=$(window).height(),loc=location.pathname,max=8,list=5;$('#js-gallery-max-number').html(max);var tm=TweenMax;var galleryCheck=function(){this.onSelect();};galleryCheck.prototype={onSelect:function(){var s=this;$('body').on('click','.js-check-thumbnail',function(arg){s.onCheckID(this);});},onCheckID:function(el){var id=$(el).parent('li').data('item-index'),pager=Math.floor(id/list);$('.js-motion-scale').removeClass('js-motion-scale--active');$('.js-motion-scale[data-item-index="'+id+'"]').addClass('js-motion-scale--active');$('.js-pager').removeClass('js-pager--active');$(this).addClass('js-pager--active');},};var galleryController={init:function(){$('body').on('click','.js-img-check',function(arg){galleryController.click(this);});},click:function(el){try{var img=$(el).find('img'),index=$(el).data('slide-index'),check_item=$('.js-gallery-slider .js-motion-scale[data-item-index="'+index+'"]'),check_item_hover=$('#js-hover-item[data-item-index="'+index+'"]'),check_num=$('.js-motion-scale.item_selected').length,id=$(el).data('facility-id'),add_item_list=$('#js-box-gallery-check-list'),pager=Math.floor(index/list),src=$(img).attr('src'),active=$('.box-gallery-pager__item').find('.active').data('slide-index');if($('section#gallery_selected_elements > input[value="'+$(img).attr('dl_src')+'"]').length>0){$('section#gallery_selected_elements > input[value="'+$(img).attr('dl_src')+'"]').remove();$(check_item).removeClass("item_selected");$(check_item_hover).removeClass("item_selected");$('.js-box-gallery-check-list__item[data-item-index="'+index+'"]').remove();}else{if(check_num<max){var input=$('<input type="hidden" name="img[]" value="'+$(img).attr('dl_src')+'" />');$('section#gallery_selected_elements').append($(input));$(add_item_list).append('<li data-item-index="'+index+'" class="box-gallery2-check-list__item js-box-gallery-check-list__item"><a href="javascript:void(0);" data-slide-index="'+id+'" class="js-check-thumbnail"><img src="'+src+'" alt="" /></a></li>');}else{alert('まとめてのダウンロード上限は'+max+'点までです');}}}catch(error){}}};$(document).ready(function(){try{galleryController.init();}catch(error){}});var motion=function(){this.scale={target:$('.js-gallery-slider .js-motion-scale'),target_img:$('.js-motion-scale').find('img'),mouseenter_interval:0.3,mouseleave_interval:0.2,ease:'Sine.easeOut'};this.onMouseMotion();};motion.prototype={onMouseMotion:function(e){var s=this;$(this.scale.target).mouseenter(function(){var y=$(this).offset().top,x=$(this).offset().left,src=$(this).find('img').attr('src'),srcL=src.replace(/\/_assets\/images\/common\/pressroom\/gallery/g,"l"),srcL="/_assets/images/common/pressroom/gallery/"+srcL;img_h=$(this).find('img').height(),img_w=$(this).find('img').width(),img_size=img_h-img_w,index=$(this).data('item-index'),id=$(this).data('facility-id'),flag=false;if($(this).hasClass('item_selected')){flag=true;}else{flag=false;}
if(flag){huge='<div class="gallery-hover__item item_selected" id="js-hover-item" data-item-index="'+index+'" style="top:'+y+'px; left: '+x+'px; width: 204px; margin-left:0; margin-top: 0;"><label class="gallery_controller_label"><a href="'+srcL+'" target="_blank" class="js-img-check" data-slide-index="'+index+'" data-facility-id="'+id+'"><span><img src="'+src+'" dl_src="'+srcL+'" class="gallery_controller_img"></span></a></label><span class="ico-gallery-check"></span></div>';}else{huge='<div class="gallery-hover__item" id="js-hover-item" data-item-index="'+index+'" style="top:'+y+'px; left: '+x+'px; width: 204px; margin-left:0; margin-top: 0;"><label class="gallery_controller_label"><a href="'+srcL+'" target="_blank" class="js-img-check" data-slide-index="'+index+'" data-facility-id="'+id+'"><span><img src="'+src+'" dl_src="'+srcL+'" class="gallery_controller_img"></span></a></label><span class="ico-gallery-check"></span></div>';}
$(this).css({opacity:1});$('#js-gallery-hover').html(huge);tm.to($('.js-motion-scale'),s.scale.mouseenter_interval,{overwrite:true,css:{opacity:0.2},ease:s.scale.ease});var thumb_size_w=224,thumb_size_h=150,this_size_w=Math.floor(thumb_size_w*1.55),this_size_h=Math.floor(thumb_size_h*1.55),ml=(this_size_w-thumb_size_w)*0.5,mt=(this_size_h-thumb_size_h)*0.5;tm.to($('#js-hover-item'),s.scale.mouseenter_interval,{overwrite:true,css:{display:'table',opacity:1,width:this_size_w+'px',marginLeft:'-'+ml+'px',marginTop:'-'+mt+'px'},ease:s.scale.ease});});$('body').on('mouseleave','#js-hover-item',function(){tm.to($('#js-hover-item'),s.scale.mouseleave_interval,{overwrite:1,css:{display:'none',opacity:0,width:'0',height:'0',marginLeft:'112px',marginTop:'75px'},ease:s.scale.ease});tm.to($('.js-motion-scale'),s.scale.mouseleave_interval,{overwrite:1,css:{opacity:1},ease:s.scale.ease});});$('body').on('mouseenter','.js-box-gallery-check-list__item',function(){var id=$(this).data('item-index'),icon=$('.js-motion-scale.item_selected[data-item-index="'+id+'"]').find('.ico-gallery-check');tm.to($(icon),0.4,{overwrite:1,css:{top:'-2px'}});});$('body').on('mouseleave','.js-box-gallery-check-list__item',function(){var id=$(this).data('item-index'),icon=$('.js-motion-scale.item_selected[data-item-index="'+id+'"]').find('.ico-gallery-check');tm.to($(icon),0.2,{overwrite:1,css:{top:'5px'}});});}};new galleryCheck();new motion();});